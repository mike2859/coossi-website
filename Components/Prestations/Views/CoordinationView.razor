@using Coossi.Blazor.Components.Shared
@using Coossi.Blazor.Data.Interfaces
@using Coossi.Blazor.Data.Models
@using Coossi.Blazor.Data.Models.Prestations
@inject IContentStore Store
@inject NavigationManager Nav
@code {
  [Parameter] public string Slug { get; set; } = "";
  private CoordinationPage? Model;
  protected override async Task OnParametersSetAsync()
    => Model = await Store.GetAsync<CoordinationPage>($"prestations/{Slug}");
  string Canonical => $"{Nav.BaseUri.TrimEnd('/')}/prestation/{Slug}";
}
@if (Model is null) { <section class="content-section"><div class="container">Chargement…</div></section> }
else {
  <Seo Title="@Model.Seo.MetaTitle" Description="@Model.Seo.MetaDescription" Canonical="@Canonical" OgImage="@(Model.Seo.OgImage ?? "images/og-prestations.webp")" />
  <PageHeader Title="@Model.Hero.Title" Lead="@Model.Hero.Subtitle" />

  <section class="content-section"><div class="container"><div class="info-card"><p>@Model.IntroText</p></div></div></section>

  <section class="content-section">
    <div class="container">
      <h2 class="section-title">Secteurs d’activité</h2>
      <div class="row">
        @foreach (var s in Model.Secteurs)
        {
          <div class="col-lg-6 mb-4">
            <div class="info-card h-100">
              <h3>@s.Title</h3>
              <ul>@foreach (var b in s.Bullets) { <li>@b</li> }</ul>
            </div>
          </div>
        }
      </div>
    </div>
  </section>

  <section class="content-section"><div class="container"><div class="info-card"><h2 class="section-title">Réglementation</h2><p>@Model.ReglementationText</p></div></div></section>

  <section class="content-section"><div class="container"><div class="info-card text-center"><h3>Disponibilité & Contact</h3><p>@Model.ContactText</p><a class="btn-primary-custom" href="/contact">Nous contacter</a></div></div></section>

  <section class="content-section"><div class="container"><h2 class="section-title">Zones</h2><div class="city-links">@foreach (var v in Model.Cities) { <a>@v</a> }</div></div></section>

  @* <CtaBar Title="@Model.Cta.Title" Text="@Model.Cta.Text" CtaText="@Model.Cta.ButtonText" CtaHref="@Model.Cta.ButtonHref" IconClass="fas fa-comments" /> *@
}
