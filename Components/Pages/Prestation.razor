@page "/prestation/{slug}"

@using Microsoft.AspNetCore.Components

@code {
    [Parameter] public string slug { get; set; } = "";

    // Mappe chaque slug vers sa vue dédiée
    private static readonly IReadOnlyDictionary<string, Type> Map =
        new Dictionary<string, Type>(StringComparer.OrdinalIgnoreCase)
        {
            ["coordination-ssi"]               = typeof(Coossi.Blazor.Components.Prestations.Views.CoordinationView),
            ["creation-dossier-ssi"]           = typeof(Coossi.Blazor.Components.Prestations.Views.DossierSsiView),
            ["assistance-moe"]                 = typeof(Coossi.Blazor.Components.Prestations.Views.AssistanceMoeView),
            ["notices-securite-accessibilite"] = typeof(Coossi.Blazor.Components.Prestations.Views.NoticesView),
            ["audit-diagnostic"]               = typeof(Coossi.Blazor.Components.Prestations.Views.AuditDiagnosticView),
            ["document-unique-evaluation"]     = typeof(Coossi.Blazor.Components.Prestations.Views.DuerpView),
            ["responsable-unique-securite"]    = typeof(Coossi.Blazor.Components.Prestations.Views.RusView),
            ["signaletique"]                   = typeof(Coossi.Blazor.Components.Prestations.Views.SignaletiqueView),
        };

    // Par défaut, on tombe sur une vue générique (peut afficher un message ou un 404 custom)
    Type ViewType => Map.TryGetValue(slug, out var t)
        ? t
        : typeof(Coossi.Blazor.Components.Prestations.Views.GenericPrestationView);
}

<DynamicComponent Type="ViewType"
                  Parameters="@(new Dictionary<string, object?> { ["Slug"] = slug })" />